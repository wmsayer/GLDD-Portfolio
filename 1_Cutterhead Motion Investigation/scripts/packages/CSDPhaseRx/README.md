# CSDPhaseRx
## Introduction
The goal of this project is to develop a data pipeline to classify raw CSD data and itemize into ***CSD phases, series, blocks, and cuts*** as described below.

The initial pipeline will use more "manual" classification methods. Once a pipeline is established that proves to be relatively accurate/reliable, the results can then be used as a training set for more advanced methods such as K-Means and neural networks.

## Current State of Work
The current workflow is call `run_csd_process()` in `mainStream.py` with a Python dictionary/JSON following the format seen in `Project/CutterheadMotion/run_instance.py`. There are various options that can be used to refine exactly what and how you want your data to be processed.

In the future, the details regarding format and options for the input JSON file will be outlined in the documentation herein.

## Definitions of Classification Items and Relationships

#### Borrow Area
  - Defined by user (borrow area name, coordinates, grade, etc.)

#### Cuts
  - Defined by user for now by boundaries and centerline (CL)
  - Can later be defined with AI by absolute CL equation **Y = mX + b** and *aggregation of digging blocks/boundaries*

#### Blocks
  - A block is an arbitrary ***contiguous area of digging***. The boundaries of a block are defined by the coordinates of its first swing, last swing, port corners, and stbd corners
  - Blocks can also have an absolute CL equation that can help AI designate blocks to cuts in the future. CL equation comes from linear regression of each swing’s centroid.
  - A new block is generated by one of three triggers:
      1)	If the current block enters or leaves a previous block’s boundaries with a similar CL equation, then a new block is created (basically this separates 1st, 2nd, 3rd passes)
      2)	If there is an extended stoppage in time/delay then a new block is created (e.g. >10 min)
      3)	If there is an abnormally large dislocation (i.e. step size > 15ft, large change in CL equation, etc.)

#### Series
A series is a group of swings where only one swing in the group is a standard swing (aka non-cleanup swing)
  - Every time there is a new standard swing a new series is generated
  - The purpose of the series is to account for double/triple swinging. It is key in order to keep our area and face calculations within the realms of reality.
  - For example, if you double swing and your step size is calculated as 0.1ft, your swing area will be extremely small, but you are still getting material in your density and velocity gauges, so your calculated face for this swing is astronomically high. However, if you group the 0.1ft swing with the previous swing that happened to be 6ft, then your face calculation for both will be based on 6.1ft. This is a realistic adjustment to make since your cleanup swing is ***digging the spillage*** from the previous standard swing.

#### Cleanup Swings & Standard Swings
- A cleanup swing is any swing with a step < 1.5 ft (this value was defined by *15857 Townsends Inlet Face Investigation* (not included), but is not set in stone and is likely equipment-specific)
- A standard swing is any swing >= 1.5ft

#### CSD Phase
Every timestamp gets allocated to a production phase:
 - 1 - Port Swing
 - 2 - Stbd Swing
 - 3 - Port Corner
 - 4 - Stbd Corner
 - 5 - Delay
